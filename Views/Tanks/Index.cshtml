@model IEnumerable<VirtualAquariumManager.Models.Tank>

@{
    ViewData["Title"] = "Tanks";
}

<div class="view-wrapper">
    <div class="table-container">
        <table>
            <caption class="table-caption">Active Tanks</caption>
            <br />
            <thead>
                <tr>
                    <th>Creation</th>
                    <th>Time</th>
                    <th>Shape</th>
                    <th>Size (L)</th>
                    <th>Water Type</th>
                    <th>pH</th>
                    <th>Temp (°C)</th>
                    <th>Ammonia (ppm)</th>
                    <th># Tasks</th>
                    <th class="edit">Edit</th>
                    <th class="details">Details</th>
                    <th class="delete">Delete</th>
                </tr>
            </thead>
            <tbody>
                @if (!Model.Any())
                {
                    <tr>
                        <td colspan="11" class="text-center">
                            No tanks are found in the system
                        </td>
                    </tr>
                }
                else
                {
                    @foreach (var tank in Model)
                    {
                        var wq = tank.WaterQuality;
                        <tr>
                            <td>@tank.CreatedDate.ToString("yyyy")</td>
                            <td>@tank.CreatedDate.ToString("HH:mm:ss")</td>
                            <td>@tank.Shape</td>
                            <td>@tank.Size.ToString("0.0")</td>
                            <td>@(wq?.WaterType ?? "—")</td>
                            <td>@(wq != null ? wq.PhLevel : "—")</td>
                            <td>@(wq != null ? wq.Temperature : "—")</td>
                            <td>@(wq != null ? wq.AmmoniaLevel : "—")</td>
                            <td>@(tank.MaintenanceTasks?.Count ?? 0)</td>
                            <td class="edit">
                                <a asp-action="Edit" asp-route-id="@tank.Id" class="btn btn-blue">Edit</a>
                            </td>
                            <td class="details">
                                <a asp-action="Details" asp-route-id="@tank.Id" class="btn btn-blue">Details</a>
                            </td>
                            <td class="delete">
                                <a asp-action="Delete" asp-route-id="@tank.Id" class="btn btn-red">Delete</a>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>

        <div class="button-container button-footer">
            <a asp-action="Create" class="btn btn-blue">Create New Tank</a>
        </div>
    </div>
</div>

